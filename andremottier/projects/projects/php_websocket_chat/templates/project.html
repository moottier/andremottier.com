{% extends "content_hero_narrow.html" %}

{% block content_main %}
<section class="section">
    <h1 class="title is-1">{{ project_title }}</h1>
    <h3 class="subtitle is-3">An exploration of websockets.</h1>
    <div class="columns is-mobile">        
        {% if not project_server_active %}
        <div class="notification is-danger column is-three-quarters">
            The chat server is currently <strong>offline</strong>. Click "Restart" to try and restart the server.
        </div>
        {% endif %}
    </div>
    <div class="block">
    {{ content_main|safe }}
    </div>
</section>
<section class="section">
    <div class="content">
        <h2 class="title is-2">Project Details</h2>
        <h3 class="title is-3">Background</h3>
        <p>This chat server was based on a fork of <a href="https://github.com/ghedipunk/PHP-Websockets">ghedipunk/PHP-Websockets</a>. The original repo implemented a server class able to:</p>
        <ul>
            <li>create and listen on a socket on the server</li>
            <li>parse and then handle responses to new and existing connections</li>
            <li>echo properly formatted client messages</li>
            <li>disconnect errored sockets</li>
        </ul>
        <p>The original library also includes a simple client capable of establishing a WebSocket connection and then sending and receiving messages.</p>
        <p>The server class was subclassed to broadcast messages instead of echo. Both the client and server were modified to handle JSON messages. A user class that was previously used to hold a unique ID and socket was modified to hold an alias. Hooks were added to the client to update the DOM when a user alias is assigned. The server was modified to assign an alias to each user using the body of the first message.</p> 
        <p>A serverside service was created to keep the chat server online.</p>
        <h3 class="title is-3">Next Steps</h3>
        <p>This project could be improved by:</p>
        <ul>
            <li>serverside check for an alias before completing a connection</li>
            <li>not blocking client DOM load with the alias prompt</li>
            <li>showing a list of currently connected users</li>
            <li>showing chat server status</li>
            <li>sending notifications if the server goes offline unexpectedly</li>
        </ul>
        <p>If you have a suggestion or find an issue free to submit a <a href="https://github.com/moottier/PHP-Websockets/pulls">pull request</a>.</p> 
    </div>
</section>
{% endblock %}